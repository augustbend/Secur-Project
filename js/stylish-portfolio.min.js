/*!
 * Start Bootstrap - Stylish Portfolio v5.0.7 (https://startbootstrap.com/template-overviews/stylish-portfolio)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap-stylish-portfolio/blob/master/LICENSE)
 */

function getBase64(e){return new Promise(function(n,r){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){var e=t.result.toString().replace(/^data:(.*,)?/,"");0<e.length%4&&(e+="=".repeat(4-e.length%4)),n(e)},t.onerror=function(e){return r(e)}})}function getUserIP(){return $.getJSON("https://api.ipify.org?format=json").then(function(e){return e.ip})}function getQueryString(){var e=new Array;if(0==e.length&&1<window.location.search.split("?").length)for(var n=window.location.search.split("?")[1].split("&"),r=0;r<n.length;r++){var t=n[r].split("=")[0],a=decodeURIComponent(n[r].split("=")[1]);e[t]=a}null!=e.id&&$("#trleIident").val(e.id),null!=e.ct&&(20<=+e.ct&&$("#plan3").css("display","block"),100<=+e.ct&&(console.log("mas de 100"),$("#plan1").css("display","block"),$("#plan2").css("display","block")),+e.ct<20&&($("#noPlans").css("display","block"),$("#plans").css("display","none")))}function getFormData(e){var n=e,r={};return $.map(n,function(e,n){r[e.name]=e.value}),r}!function(t){"use strict";getQueryString(),t(".btn-contratar").on("click",function(e){var n=t(this).data("plan");t("#trleVplanSele").val(n)}),getUserIP().then(function(e){var n=e;t("#auditVipad").val(n)}),t('input[type="file"]').on("change",function(){var e,n=[],r=document.getElementById("excelFile").files;if(1<r.length)n.push("Total Files ("+r.length+")");else for(e in r)r.hasOwnProperty(e)&&n.push(r[e].name);t(this).next(".custom-file-label").html(n.join(","))}),t("#frm_uploadExcel").validate({rules:{excelFile:{required:!0}},messages:{excelFile:{required:"Elija la plantilla"}},errorElement:"span",errorPlacement:function(e,n){e.addClass("invalid-feedback"),n.closest(".form-group").append(e)},highlight:function(e,n,r){t(e).addClass("is-invalid")},unhighlight:function(e,n,r){t(e).removeClass("is-invalid")},submitHandler:function(r){t("#btn_upload").prop("disabled",!0),getBase64(document.querySelector('input[type="file"]').files[0]).then(function(e){t("#trleVfileBa64").val(e);var n=t(r).serializeArray();return t.ajax({url:"https://uatgateway.zumseguros.com/input/api/v1/plan/loadPlantilla",type:"post",data:JSON.stringify(getFormData(n)),headers:{codCanal:"200"},dataType:"json",cache:!1,contentType:"application/json",processData:!1,success:function(e){window.location.href="/resultado.html"},error:function(e){alert("Hubo un error. Por favor, reintentar luego")},complete:function(e){t("#btn_upload").prop("disabled",!1)}}),!1})}}),t("#frm_quote").validate({rules:{trleVemail:{required:!0,email:!0},trleVphone:{required:!0,number:!0,minlength:8,maxlength:9},trleRuc:{required:!0,number:!0,minlength:8,maxlength:11},trleVnameComer:{required:!0},trleNumtr:{required:!0,number:!0},trleNumHonor:{required:!0,number:!0}},messages:{trleVemail:{required:"Ingrese su correo electrónico",email:"Ingrese un correo electónico válido"},trleVphone:{required:"Ingrese su número de teléfono",number:"Ingrese un número de teléfono válido",minlength:"Su número debe tener mínimo 8 dígitos",maxlength:"Su número debe tener máximo 9 dígitos"},trleRuc:{required:"Ingrese el RUC de su empresa",number:"Ingrese un RUC válido",minlength:"Su número debe tener mínimo 8 dígitos",maxlength:"Su número debe tener máximo 11 dígitos"},trleVnameComer:{required:"Ingrese la razón social de su empresa"},trleNumtr:{required:"Ingrese el número de trabajadores en planilla",number:"Ingrese sólo número"},trleNumHonor:{required:"Ingrese el número de trabajadores en recibo por honorarios",number:"Ingrese sólo número"}},errorElement:"span",errorPlacement:function(e,n){e.addClass("invalid-feedback"),n.closest(".form-group").append(e)},highlight:function(e,n,r){t(e).addClass("is-invalid")},unhighlight:function(e,n,r){t(e).removeClass("is-invalid")},submitHandler:function(e){t("#btn_validar").prop("disabled",!0);var n=+t("#trleNumtrPlani").val()+ +t("#trleNumtr").val(),r=t(e).serializeArray();return t.ajax({url:"https://uatgateway.zumseguros.com/input/api/v1/plan/tTransactionLeads",type:"POST",data:JSON.stringify(getFormData(r)),headers:{codCanal:"200"},dataType:"json",contentType:"application/json",success:function(e){window.location.href="/planes.html?id="+e.payload.id_transaccion+"&ct="+n},error:function(e){alert("Hubo un error. Por favor, reintentar luego")},complete:function(e){t("#btn_validar").prop("disabled",!1)}}),!1}})}(jQuery);